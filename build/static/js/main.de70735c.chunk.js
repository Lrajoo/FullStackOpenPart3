(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{ 41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var c=t(2),a=t.n(c),r=t(15),o=t.n(r),u=t(6),i=t.n(u),s=t(16),l=t(3),d=t(0),j=function(e){return Object(d.jsx)("h1",{ children:e.title })},b=function(e){return e.persons.map((function(n){return Object(d.jsxs)("div",{ children:[n.name," ",n.number," ",Object(d.jsx)("button",{ onClick:function(){return e.deletePerson(n)},children:"delete" })] },n.name)}))},h=function(e){return Object(d.jsxs)("div",{ children:["filter shown with ",Object(d.jsx)("input",{ value:e.newFilter,onChange:e.handleFilterChange })] })},f=function(e){return Object(d.jsxs)("form",{ onSubmit:e.addPerson,children:[Object(d.jsxs)("div",{ children:["name: ",Object(d.jsx)("input",{ value:e.newName,onChange:e.handleNameChange })] }),Object(d.jsxs)("div",{ children:["number: ",Object(d.jsx)("input",{ value:e.newNumber,onChange:e.handleNumberChange })] }),Object(d.jsx)("div",{ children:Object(d.jsx)("button",{ type:"submit",children:"add" }) })] })},m=t(4),O=t.n(m),p="api/persons",v=function(){return O.a.get(p).then((function(e){return e.data}))},x=function(e){return console.log("create,",e),O.a.post(p,e).then((function(e){return e})).catch((function(e){return e.response.data}))},w=function(e,n){return O.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return console.log("id",e),O.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},C=function(){var e=Object(c.useState)([]),n=Object(l.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),u=o[0],m=o[1],O=Object(c.useState)(""),p=Object(l.a)(O,2),C=p[0],N=p[1],k=Object(c.useState)(""),S=Object(l.a)(k,2),y=S[0],P=S[1],E=Object(c.useState)(t),F=Object(l.a)(E,2),T=F[0],M=F[1],D=Object(c.useState)(""),I=Object(l.a)(D,2),J=I[0],L=I[1],A=Object(c.useState)(""),B=Object(l.a)(A,2),U=B[0],q=B[1];Object(c.useEffect)((function(){v().then((function(e){a(e),M(e)}))}),[]);var z=function(){var e=Object(s.a)(i.a.mark((function e(n){var c,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c={ name:u,number:C },r=!1,t.forEach((function(e){e.name===u&&(r=!0)})),!r){e.next=8;break}window.confirm("".concat(u," is already added to the phonebook, replace the old number with a new one?"))&&(o=t.find((function(e){return e.name===c.name})),w(o.id,c),L("Updated ".concat(c.name)),setTimeout((function(){L(null)}),3e3)),e.next=13;break;case 8:return e.next=10,x(c);case 10:s=e.sent,console.log("res here,",s),void 0!==s&&void 0!==s.status&&200===s.status?(console.log("create new person"),a(t.concat(c)),M(t.concat(c)),m(""),N(""),P(""),L("Added ".concat(c.name)),setTimeout((function(){L(null)}),3e3)):(console.log("error with create"),q(s.error),setTimeout((function(){q(null)}),3e3));case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{ children:[Object(d.jsx)(j,{ title:"Phonebook" }),U&&Object(d.jsx)("div",{ className:"errorMessage",children:U }),J&&Object(d.jsx)("div",{ className:"successMessage",children:J }),Object(d.jsx)(h,{ newFilter:y,handleFilterChange:function(e){P(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));M(n)} }),Object(d.jsx)(j,{ title:"add a new" }),Object(d.jsx)(f,{ addPerson:z,newName:u,newNumber:C,handleNameChange:function(e){return m(e.target.value)},handleNumberChange:function(e){return N(e.target.value)} }),Object(d.jsx)(j,{ title:"Numbers" }),Object(d.jsx)(b,{ persons:T,deletePerson:function(e){window.confirm("Delete ".concat(e.name))&&g(e.id).then((function(n){var c;t.forEach((function(n,t){n.name===e.name&&(c=t)}));var r=t.splice(c,1);a(r)})).catch((function(n){q("Information of ".concat(e.name," has already been removed from the server")),setTimeout((function(){q(null)}),3e3)}))} })] })};t(41);o.a.render(Object(d.jsx)(a.a.StrictMode,{ children:Object(d.jsx)(C,{}) }),document.getElementById("root"))} },[[42,1,2]]])
//# sourceMappingURL=main.de70735c.chunk.js.map