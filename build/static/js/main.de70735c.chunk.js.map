{"version":3,"sources":["components/Title.js","components/Persons.js","components/Filter.js","components/Form.js","services/addresses.js","App.js","index.js"],"names":["Title","props","title","Persons","persons","map","person","name","number","onClick","deletePerson","Filter","value","newFilter","onChange","handleFilterChange","Form","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","baseUrl","axios","get","then","response","data","newObject","console","log","post","catch","error","id","put","delete","App","useState","setPersons","setNewName","setNewNumber","setNewFilter","searchPersons","setSearchPersons","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","addressService","event","a","preventDefault","personObject","nameExists","forEach","window","confirm","p","find","setTimeout","undefined","status","concat","className","target","searched","filter","toLowerCase","includes","i","index","updatedPersons","splice","e","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8MAIeA,EAJD,SAAAC,GACZ,OAAO,6BAAKA,EAAMC,SCSLC,EAVC,SAAAF,GACd,OAAOA,EAAMG,QAAQC,KAAI,SAAAC,GACvB,OACE,gCACGA,EAAOC,KADV,IACiBD,EAAOE,OADxB,IACgC,wBAAQC,QAAS,kBAAMR,EAAMS,aAAaJ,IAA1C,sBADtBA,EAAOC,UCKRI,EARA,SAAAV,GACb,OACE,qDACoB,uBAAOW,MAAOX,EAAMY,UAAWC,SAAUb,EAAMc,yBCaxDC,EAhBF,SAAAf,GACX,OACE,uBAAMgB,SAAUhB,EAAMiB,UAAtB,UACE,yCACQ,uBAAON,MAAOX,EAAMkB,QAASL,SAAUb,EAAMmB,sBAErD,2CACU,uBAAOR,MAAOX,EAAMoB,UAAWP,SAAUb,EAAMqB,wBAEzD,8BACE,wBAAQC,KAAK,SAAb,uB,gBCTFC,EAAU,cA8BD,EA5BA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SA0B5B,EAvBA,SAAAC,GAGb,OAFAC,QAAQC,IAAI,UAAWF,GACPL,IAAMQ,KAAKT,EAASM,GAEjCH,MAAK,SAAAC,GACJ,OAAOA,KAERM,OAAM,SAAAC,GACL,OAAOA,EAAMP,SAASC,SAeb,EAXA,SAACO,EAAIN,GAElB,OADgBL,IAAMY,IAAN,UAAab,EAAb,YAAwBY,GAAMN,GAC/BH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAS5B,EANM,SAAAO,GAGnB,OAFAL,QAAQC,IAAI,KAAMI,GACFX,IAAMa,OAAN,UAAgBd,EAAhB,YAA2BY,IAC5BT,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCiG5BU,EAtHH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTpC,EADS,KACAqC,EADA,OAEcD,mBAAS,IAFvB,mBAETrB,EAFS,KAEAuB,EAFA,OAGkBF,mBAAS,IAH3B,mBAGTnB,EAHS,KAGEsB,EAHF,OAIkBH,mBAAS,IAJ3B,mBAIT3B,EAJS,KAIE+B,EAJF,OAK0BJ,mBAASpC,GALnC,mBAKTyC,EALS,KAKMC,EALN,OAM4BN,mBAAS,IANrC,mBAMTO,EANS,KAMOC,EANP,OAOwBR,mBAAS,IAPjC,mBAOTS,EAPS,KAOKC,EAPL,KAgBhBC,qBAPmB,WACjBC,IAAwBzB,MAAK,SAAAC,GAC3Ba,EAAWb,GACXkB,EAAiBlB,QAIC,IAEtB,IAAMV,EAAS,uCAAG,WAAMmC,GAAN,qBAAAC,EAAA,yDAChBD,EAAME,iBACAC,EAAe,CACnBjD,KAAMY,EACNX,OAAQa,GAENoC,GAAa,EACjBrD,EAAQsD,SAAQ,SAAApD,GACVA,EAAOC,OAASY,IAClBsC,GAAa,OAGbA,EAZY,gBAaVE,OAAOC,QAAP,UAAkBzC,EAAlB,iFACI0C,EAAIzD,EAAQ0D,MAAK,SAAAxD,GAAM,OAAIA,EAAOC,OAASiD,EAAajD,QAC9D6C,EAAsBS,EAAEzB,GAAIoB,GAC5BR,EAAkB,WAAD,OAAYQ,EAAajD,OAC1CwD,YAAW,WACTf,EAAkB,QACjB,MAnBS,wCAsBOI,EAAsBI,GAtB7B,QAsBV5B,EAtBU,OAuBdG,QAAQC,IAAI,YAAaJ,QACRoC,IAAbpC,QAA8CoC,IAApBpC,EAASqC,QAA4C,MAApBrC,EAASqC,QACtElC,QAAQC,IAAI,qBACZS,EAAWrC,EAAQ8D,OAAOV,IAC1BV,EAAiB1C,EAAQ8D,OAAOV,IAChCd,EAAW,IACXC,EAAa,IACbC,EAAa,IACbI,EAAkB,SAAD,OAAUQ,EAAajD,OACxCwD,YAAW,WACTf,EAAkB,QACjB,OAEHjB,QAAQC,IAAI,qBACZkB,EAAgBtB,EAASO,OACzB4B,YAAW,WACTb,EAAgB,QACf,MAxCS,4CAAH,sDAgFf,OACE,gCACE,cAAC,EAAD,CAAOhD,MAAM,cACZ+C,GAAgB,qBAAKkB,UAAU,eAAf,SAA+BlB,IAC/CF,GAAkB,qBAAKoB,UAAU,iBAAf,SAAiCpB,IACpD,cAAC,EAAD,CAAQlC,UAAWA,EAAWE,mBApCP,SAAAsC,GACzBT,EAAaS,EAAMe,OAAOxD,OAC1B,IAAIyD,EAAWjE,EAAQkE,QAAO,SAAAhE,GAC5B,OAAOA,EAAOC,KAAKgE,cAAcC,SAASnB,EAAMe,OAAOxD,MAAM2D,kBAE/DzB,EAAiBuB,MAgCf,cAAC,EAAD,CAAOnE,MAAM,cACb,cAAC,EAAD,CACEgB,UAAWA,EACXC,QAASA,EACTE,UAAWA,EACXD,iBA9CmB,SAAAiC,GAAK,OAAIX,EAAWW,EAAMe,OAAOxD,QA+CpDU,mBA7CqB,SAAA+B,GAAK,OAAIV,EAAaU,EAAMe,OAAOxD,UA+C1D,cAAC,EAAD,CAAOV,MAAM,YACb,cAAC,EAAD,CAASE,QAASyC,EAAenC,aAtChB,SAAAJ,GACfqD,OAAOC,QAAP,iBAAyBtD,EAAOC,QAClC6C,EACgB9C,EAAO8B,IACpBT,MAAK,SAAAC,GACJ,IAAI6C,EACJrE,EAAQsD,SAAQ,SAACG,EAAGa,GACdb,EAAEtD,OAASD,EAAOC,OACpBkE,EAAIC,MAGR,IAAIC,EAAiBvE,EAAQwE,OAAOH,EAAG,GACvChC,EAAWkC,MAEZzC,OAAM,SAAA2C,GACL3B,EAAgB,kBAAD,OAAmB5C,EAAOC,KAA1B,8CACfwD,YAAW,WACTb,EAAgB,QACf,e,MC/Fb4B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.de70735c.chunk.js","sourcesContent":["const Title = props => {\n  return <h1>{props.title}</h1>;\n};\n\nexport default Title;\n","const Persons = props => {\n  return props.persons.map(person => {\n    return (\n      <div key={person.name}>\n        {person.name} {person.number} <button onClick={() => props.deletePerson(person)}>delete</button>\n      </div>\n    );\n  });\n};\n\nexport default Persons;\n","const Filter = props => {\n  return (\n    <div>\n      filter shown with <input value={props.newFilter} onChange={props.handleFilterChange} />\n    </div>\n  );\n};\n\nexport default Filter;\n","const Form = props => {\n  return (\n    <form onSubmit={props.addPerson}>\n      <div>\n        name: <input value={props.newName} onChange={props.handleNameChange} />\n      </div>\n      <div>\n        number: <input value={props.newNumber} onChange={props.handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default Form;\n","import axios from 'axios';\nconst baseUrl = 'api/persons';\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObject => {\n  console.log('create,', newObject);\n  const request = axios.post(baseUrl, newObject);\n  return request\n    .then(response => {\n      return response;\n    })\n    .catch(error => {\n      return error.response.data;\n    });\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nconst deletePerson = id => {\n  console.log('id', id);\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, update, deletePerson };\n","import React, { useState, useEffect } from 'react';\nimport Title from './components/Title';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport Form from './components/Form';\nimport addressService from './services/addresses';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [searchPersons, setSearchPersons] = useState(persons);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const getPersons = () => {\n    addressService.getAll().then(response => {\n      setPersons(response);\n      setSearchPersons(response);\n    });\n  };\n\n  useEffect(getPersons, []);\n\n  const addPerson = async event => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber\n    };\n    let nameExists = false;\n    persons.forEach(person => {\n      if (person.name === newName) {\n        nameExists = true;\n      }\n    });\n    if (nameExists) {\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        const p = persons.find(person => person.name === personObject.name);\n        addressService.update(p.id, personObject);\n        setSuccessMessage(`Updated ${personObject.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 3000);\n      }\n    } else {\n      let response = await addressService.create(personObject);\n      console.log('res here,', response);\n      if (response !== undefined && response.status !== undefined && response.status === 200) {\n        console.log('create new person');\n        setPersons(persons.concat(personObject));\n        setSearchPersons(persons.concat(personObject));\n        setNewName('');\n        setNewNumber('');\n        setNewFilter('');\n        setSuccessMessage(`Added ${personObject.name}`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 3000);\n      } else {\n        console.log('error with create');\n        setErrorMessage(response.error);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      }\n    }\n  };\n\n  const handleNameChange = event => setNewName(event.target.value);\n\n  const handleNumberChange = event => setNewNumber(event.target.value);\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value);\n    let searched = persons.filter(person => {\n      return person.name.toLowerCase().includes(event.target.value.toLowerCase());\n    });\n    setSearchPersons(searched);\n  };\n\n  const deletePerson = person => {\n    if (window.confirm(`Delete ${person.name}`)) {\n      addressService\n        .deletePerson(person.id)\n        .then(response => {\n          let i;\n          persons.forEach((p, index) => {\n            if (p.name === person.name) {\n              i = index;\n            }\n          });\n          let updatedPersons = persons.splice(i, 1);\n          setPersons(updatedPersons);\n        })\n        .catch(e => {\n          setErrorMessage(`Information of ${person.name} has already been removed from the server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 3000);\n        });\n    }\n  };\n\n  return (\n    <div>\n      <Title title=\"Phonebook\" />\n      {errorMessage && <div className=\"errorMessage\">{errorMessage}</div>}\n      {successMessage && <div className=\"successMessage\">{successMessage}</div>}\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n      <Title title=\"add a new\" />\n      <Form\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <Title title=\"Numbers\" />\n      <Persons persons={searchPersons} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}